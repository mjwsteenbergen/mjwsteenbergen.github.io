import{r as i}from"./path.ba08e63e.js";const a="https://zeus-laurentia.azurewebsites.net",o=a+"/api/run/christmascard?token=7fb7ddbf-18a1-4c0d-bd76-0441dd09897c",n=class{constructor(e){i(this,e),this.data={letter:"Please wait while the elves load your letter. If this takes too long, please refresh the page or contact Martijn, as my code is probably broken.",memories:[]},this.listeners={letter:[],memories:[]}}fetch(){const e=()=>{this.data={letter:"Hi! This page has no way of identifying you. Please use the url sent by Martijn. If this was a link sent by Martijn, please contact him, as he did something wrong. Merry Christmas!",memories:[]},this.listeners.letter.forEach(s=>s(this.data.letter))};let t=window.location.href.split("?");if(t.length===1){e();return}let r=new URLSearchParams(t[1]);if(!r.has("id")){e();return}return fetch(o+"&id="+r.get("id")).then(s=>s.json()).then(s=>s.Reply.Result)}connectedCallback(){this.fetch().then(e=>{this.data=e,this.listeners.letter.forEach(t=>t(this.data.letter)),this.listeners.memories.forEach(t=>t(this.data.memories))})}listen(e){return new Promise(()=>{(e==null?void 0:e.property)==="memory"&&(this.listeners.memories.push(e.listener),e.listener(this.data.memories)),e.property==="letter"&&(this.listeners.letter.push(e.listener),e.listener(this.data.letter))})}};export{n as data_store};
